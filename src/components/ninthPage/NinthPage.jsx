import { useEffect , useRef, useState } from "react";
import Lottie from "lottie-react";

import gsap from "gsap"
import { ScrollTrigger } from "gsap/ScrollTrigger";
import { useGSAP } from "@gsap/react";
gsap.registerPlugin(useGSAP, ScrollTrigger)

import emailjs from "@emailjs/browser";
import dotenv from "dotenv"
import letteAnimPg9 from "../../assets/lottieJsonAnim/anim15.json"
import "./NinthPage.css"


export default function NinthPage (){

    //start firm processing : ==>> 
    const formRef = useRef();
    const [statusmMail, setStatusMail] = useState("");

    const [formName, setFormName] = useState('')
    const [formEmail, setFormEmail] = useState('')
    const [formMessage, setFormMessage] = useState('')

    const handleChangeName = (e) => {
        setFormName(e.target.value)
    };
    const handleChangeEmail = (e) => {
        setFormEmail(e.target.value)
    };
    const handleChangeMessage = (e) => {
        setFormMessage(e.target.value)
    };

    const sendEmail = (e) => {
        e.preventDefault();
        console.log("Service ID:", import.meta.env.VITE_Service_ID);
        console.log("Template ID:", import.meta.env.VITE_Template_ID);
        console.log("Public Key:", import.meta.env.VITE_Public_key);
        console.log("Name", formName);
        console.log("Email", formEmail);
        console.log("Message", formMessage);

        emailjs.sendForm(
                import.meta.env.VITE_Service_ID, // service ID
                import.meta.env.VITE_Template_ID, // template ID
                formRef.current,
                import.meta.env.VITE_Public_key // my EmailJS public key
            ).then((response) => {
                    console.log("Email sent successfully!", response);
                    setStatusMail("Message sent successfully!");
                    setFormName("")
                    setFormEmail("")
                    setFormMessage("")
                    window.alert("Successfully send the Email to Niaz Mahmud");
                },(error) => {
                    console.log("Failed to send email", error);
                    setStatusMail("Failed to send message.");
                }
            );
    };


    useEffect(()=>{
        //border top animation
        gsap.to(".page9>.page9_border_top", {
            scrollTrigger:{
               trigger: ".page9" , 
               scroller:"#main" , 
               markers: false, 
               start : "0% 60%" , 
               end: "0% 35%",
               scrub:true,
            },
            width:"100vw",
            duration: 1,
        })
        // Contact Me sSVG animation 
        gsap.to(".pg9Container>.pg9FormContainer>.pg9MyProjectSvg>svg",{
            scrollTrigger:{
                trigger: ".page9" , 
                scroller:"#main" , 
                markers: false, 
                start : "0% 65%" , 
                end: "0% 55%",
                scrub:false,
            },
            y : "0%",
            duration: 1.5,
            opacity: 1,
        })       

        gsap.fromTo([".page5", ".page6", ".page7", ".page8", ".page9","page10"], 
            {
                scrollTrigger:{
                    trigger: ".page9" , 
                    scroller:"#main" , 
                    markers: false , 
                    start : "0% 65%" , 
                    end: "0% 40%",
                    scrub:true,
                },
                backgroundColor: "rgb(248, 248, 248)",
            },
            {
                scrollTrigger:{
                    trigger: ".page9" , 
                    scroller:"#main" , 
                    markers: false , 
                    start : "0% 65%" , 
                    end: "0% 40%",
                    scrub:true,
                },
                duration: 0.5,
                color:"white",
                backgroundColor: "rgb(15, 15, 15)",
            }
        )

    },[])

    return (
        <div className="page9">
            <div className="page9_border_top"></div>
            <div className="pg9Container">
                <div className="pg9MyProjectText">
                    <p className="btn-shine">Let Start a New Journey</p>
                </div>
                <div className="pg9FormContainer">
                    <div className="pg9MyProjectSvg">
                        <svg width="436" height="60" viewBox="0 0 436 60" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M75.2868 21.1591H66.7868C66.5444 19.7652 66.0974 18.5303 65.4459 17.4545C64.7944 16.3636 63.9838 15.4394 63.0141 14.6818C62.0444 13.9242 60.9383 13.3561 59.6959 12.9773C58.4686 12.5833 57.1429 12.3864 55.7186 12.3864C53.1883 12.3864 50.9459 13.0227 48.9914 14.2955C47.0368 15.553 45.5065 17.4015 44.4005 19.8409C43.2944 22.2652 42.7414 25.2273 42.7414 28.7273C42.7414 32.2879 43.2944 35.2879 44.4005 37.7273C45.5217 40.1515 47.052 41.9848 48.9914 43.2273C50.9459 44.4545 53.1808 45.0682 55.6959 45.0682C57.0899 45.0682 58.3929 44.8864 59.605 44.5227C60.8323 44.1439 61.9308 43.5909 62.9005 42.8636C63.8853 42.1364 64.7111 41.2424 65.3777 40.1818C66.0596 39.1212 66.5293 37.9091 66.7868 36.5455L75.2868 36.5909C74.9686 38.803 74.2793 40.8788 73.2186 42.8182C72.1732 44.7576 70.802 46.4697 69.105 47.9545C67.408 49.4242 65.4232 50.5758 63.1505 51.4091C60.8777 52.2273 58.355 52.6364 55.5823 52.6364C51.4914 52.6364 47.8399 51.6894 44.6277 49.7955C41.4156 47.9015 38.8853 45.1667 37.0368 41.5909C35.1883 38.0152 34.2641 33.7273 34.2641 28.7273C34.2641 23.7121 35.1959 19.4242 37.0596 15.8636C38.9232 12.2879 41.4611 9.55303 44.6732 7.65909C47.8853 5.76515 51.5217 4.81818 55.5823 4.81818C58.1732 4.81818 60.5823 5.18182 62.8096 5.90909C65.0368 6.63636 67.0217 7.70455 68.7641 9.11364C70.5065 10.5076 71.9383 12.2197 73.0596 14.25C74.1959 16.2652 74.9383 18.5682 75.2868 21.1591ZM99.1521 52.6818C95.743 52.6818 92.7884 51.9318 90.2884 50.4318C87.7884 48.9318 85.849 46.8333 84.4702 44.1364C83.1066 41.4394 82.4248 38.2879 82.4248 34.6818C82.4248 31.0758 83.1066 27.9167 84.4702 25.2045C85.849 22.4924 87.7884 20.3864 90.2884 18.8864C92.7884 17.3864 95.743 16.6364 99.1521 16.6364C102.561 16.6364 105.516 17.3864 108.016 18.8864C110.516 20.3864 112.448 22.4924 113.811 25.2045C115.19 27.9167 115.879 31.0758 115.879 34.6818C115.879 38.2879 115.19 41.4394 113.811 44.1364C112.448 46.8333 110.516 48.9318 108.016 50.4318C105.516 51.9318 102.561 52.6818 99.1521 52.6818ZM99.1975 46.0909C101.046 46.0909 102.591 45.5833 103.834 44.5682C105.076 43.5379 106.001 42.1591 106.607 40.4318C107.228 38.7045 107.538 36.7803 107.538 34.6591C107.538 32.5227 107.228 30.5909 106.607 28.8636C106.001 27.1212 105.076 25.7348 103.834 24.7045C102.591 23.6742 101.046 23.1591 99.1975 23.1591C97.3036 23.1591 95.7278 23.6742 94.4702 24.7045C93.2278 25.7348 92.296 27.1212 91.6748 28.8636C91.0687 30.5909 90.7657 32.5227 90.7657 34.6591C90.7657 36.7803 91.0687 38.7045 91.6748 40.4318C92.296 42.1591 93.2278 43.5379 94.4702 44.5682C95.7278 45.5833 97.3036 46.0909 99.1975 46.0909ZM132.37 31.5455V52H124.142V17.0909H132.006V23.0227H132.415C133.218 21.0682 134.498 19.5152 136.256 18.3636C138.029 17.2121 140.218 16.6364 142.824 16.6364C145.233 16.6364 147.332 17.1515 149.12 18.1818C150.923 19.2121 152.317 20.7045 153.301 22.6591C154.301 24.6136 154.794 26.9848 154.779 29.7727V52H146.551V31.0455C146.551 28.7121 145.945 26.8864 144.733 25.5682C143.536 24.25 141.877 23.5909 139.756 23.5909C138.317 23.5909 137.036 23.9091 135.915 24.5455C134.809 25.1667 133.938 26.0682 133.301 27.25C132.68 28.4318 132.37 29.8636 132.37 31.5455ZM181.854 17.0909V23.4545H161.786V17.0909H181.854ZM166.74 8.72727H174.968V41.5C174.968 42.6061 175.134 43.4545 175.468 44.0455C175.816 44.6212 176.271 45.0152 176.831 45.2273C177.392 45.4394 178.013 45.5455 178.695 45.5455C179.21 45.5455 179.68 45.5076 180.104 45.4318C180.543 45.3561 180.877 45.2879 181.104 45.2273L182.49 51.6591C182.051 51.8106 181.422 51.9773 180.604 52.1591C179.801 52.3409 178.816 52.447 177.65 52.4773C175.589 52.5379 173.733 52.2273 172.081 51.5455C170.43 50.8485 169.119 49.7727 168.15 48.3182C167.195 46.8636 166.725 45.0455 166.74 42.8636V8.72727ZM200.06 52.7045C197.848 52.7045 195.856 52.3106 194.083 51.5227C192.325 50.7197 190.931 49.5379 189.901 47.9773C188.886 46.4167 188.378 44.4924 188.378 42.2045C188.378 40.2348 188.742 38.6061 189.469 37.3182C190.197 36.0303 191.189 35 192.447 34.2273C193.704 33.4545 195.121 32.8712 196.697 32.4773C198.288 32.0682 199.931 31.7727 201.628 31.5909C203.674 31.3788 205.333 31.1894 206.606 31.0227C207.878 30.8409 208.803 30.5682 209.378 30.2045C209.969 29.8258 210.265 29.2424 210.265 28.4545V28.3182C210.265 26.6061 209.757 25.2803 208.742 24.3409C207.727 23.4015 206.265 22.9318 204.356 22.9318C202.341 22.9318 200.742 23.3712 199.56 24.25C198.394 25.1288 197.606 26.1667 197.197 27.3636L189.515 26.2727C190.121 24.1515 191.121 22.3788 192.515 20.9545C193.909 19.5151 195.613 18.4394 197.628 17.7273C199.644 17 201.871 16.6364 204.31 16.6364C205.992 16.6364 207.666 16.8333 209.333 17.2273C211 17.6212 212.522 18.2727 213.901 19.1818C215.28 20.0758 216.386 21.2955 217.219 22.8409C218.068 24.3864 218.492 26.3182 218.492 28.6364V52H210.583V47.2045H210.31C209.81 48.1742 209.106 49.0833 208.197 49.9318C207.303 50.7652 206.174 51.4394 204.81 51.9545C203.462 52.4545 201.878 52.7045 200.06 52.7045ZM202.197 46.6591C203.848 46.6591 205.28 46.3333 206.492 45.6818C207.704 45.0152 208.636 44.1364 209.288 43.0455C209.954 41.9545 210.288 40.7652 210.288 39.4773V35.3636C210.03 35.5758 209.591 35.7727 208.969 35.9545C208.363 36.1364 207.681 36.2955 206.924 36.4318C206.166 36.5682 205.416 36.6894 204.674 36.7955C203.931 36.9015 203.288 36.9924 202.742 37.0682C201.515 37.2348 200.416 37.5076 199.447 37.8864C198.477 38.2652 197.712 38.7955 197.151 39.4773C196.591 40.1439 196.31 41.0076 196.31 42.0682C196.31 43.5833 196.863 44.7273 197.969 45.5C199.075 46.2727 200.484 46.6591 202.197 46.6591ZM243.272 52.6818C239.787 52.6818 236.795 51.9167 234.295 50.3864C231.81 48.8561 229.893 46.7424 228.545 44.0455C227.211 41.3333 226.545 38.2121 226.545 34.6818C226.545 31.1364 227.227 28.0076 228.59 25.2955C229.954 22.5682 231.878 20.447 234.363 18.9318C236.863 17.4015 239.818 16.6364 243.227 16.6364C246.06 16.6364 248.568 17.1591 250.749 18.2045C252.946 19.2348 254.696 20.697 255.999 22.5909C257.302 24.4697 258.045 26.6667 258.227 29.1818H250.363C250.045 27.5 249.287 26.0985 248.09 24.9773C246.908 23.8409 245.325 23.2727 243.34 23.2727C241.658 23.2727 240.181 23.7273 238.908 24.6364C237.636 25.5303 236.643 26.8182 235.931 28.5C235.234 30.1818 234.886 32.197 234.886 34.5455C234.886 36.9242 235.234 38.9697 235.931 40.6818C236.628 42.3788 237.605 43.6894 238.863 44.6136C240.136 45.5227 241.628 45.9773 243.34 45.9773C244.552 45.9773 245.636 45.75 246.59 45.2955C247.56 44.8258 248.371 44.1515 249.022 43.2727C249.674 42.3939 250.121 41.3258 250.363 40.0682H258.227C258.03 42.5379 257.302 44.7273 256.045 46.6364C254.787 48.5303 253.075 50.0152 250.908 51.0909C248.742 52.1515 246.196 52.6818 243.272 52.6818ZM283.694 17.0909V23.4545H263.626V17.0909H283.694ZM268.58 8.72727H276.808V41.5C276.808 42.6061 276.974 43.4545 277.308 44.0455C277.656 44.6212 278.111 45.0152 278.671 45.2273C279.232 45.4394 279.853 45.5455 280.535 45.5455C281.05 45.5455 281.52 45.5076 281.944 45.4318C282.383 45.3561 282.717 45.2879 282.944 45.2273L284.33 51.6591C283.891 51.8106 283.262 51.9773 282.444 52.1591C281.641 52.3409 280.656 52.447 279.49 52.4773C277.429 52.5379 275.573 52.2273 273.921 51.5455C272.27 50.8485 270.959 49.7727 269.99 48.3182C269.035 46.8636 268.565 45.0455 268.58 42.8636V8.72727ZM309.373 5.45454H319.692L333.51 39.1818H334.055L347.873 5.45454H358.192V52H350.101V20.0227H349.669L336.805 51.8636H330.76L317.896 19.9545H317.464V52H309.373V5.45454ZM383.744 52.6818C380.244 52.6818 377.222 51.9545 374.676 50.5C372.146 49.0303 370.199 46.9545 368.835 44.2727C367.472 41.5758 366.79 38.4015 366.79 34.75C366.79 31.1591 367.472 28.0076 368.835 25.2955C370.214 22.5682 372.138 20.447 374.608 18.9318C377.078 17.4015 379.979 16.6364 383.312 16.6364C385.464 16.6364 387.494 16.9848 389.403 17.6818C391.328 18.3636 393.025 19.4242 394.494 20.8636C395.979 22.303 397.146 24.1364 397.994 26.3636C398.843 28.5758 399.267 31.2121 399.267 34.2727V36.7955H370.653V31.25H391.381C391.366 29.6742 391.025 28.2727 390.358 27.0455C389.691 25.803 388.759 24.8258 387.562 24.1136C386.381 23.4015 385.002 23.0455 383.426 23.0455C381.744 23.0455 380.267 23.4545 378.994 24.2727C377.722 25.0758 376.729 26.1364 376.017 27.4545C375.32 28.7576 374.964 30.1894 374.949 31.75V36.5909C374.949 38.6212 375.32 40.3636 376.062 41.8182C376.805 43.2576 377.843 44.3636 379.176 45.1364C380.509 45.8939 382.07 46.2727 383.858 46.2727C385.055 46.2727 386.138 46.1061 387.108 45.7727C388.078 45.4242 388.919 44.9167 389.631 44.25C390.343 43.5833 390.881 42.7576 391.244 41.7727L398.926 42.6364C398.441 44.6667 397.517 46.4394 396.153 47.9545C394.805 49.4545 393.078 50.6212 390.972 51.4545C388.866 52.2727 386.456 52.6818 383.744 52.6818Z" fill="#8C8C73"/>
                            <path d="M30 30C30 38.2843 23.2843 45 15 45C6.71573 45 0 38.2843 0 30C11 30 6.71573 30 15 30C23.2843 30 22.5 30 30 30Z" fill="#1AFF00"/>
                            <path d="M436 30C436 38.2843 429.284 45 421 45C412.716 45 406 38.2843 406 30C417 30 412.716 30 421 30C429.284 30 428.5 30 436 30Z" fill="#1AFF00"/>
                            <path d="M29.9738 57.7538H399.021" stroke="#8C8C73" strokeWidth="4"/>
                        </svg>
                    </div>
                    <div className="pg9ExpCards">
                        <div className="pg9RightCont">
                            <div className="pg9RightTop">
                                <p className="pg9rightTextComm pg9rightText1">Let's Build Our Nerwork</p>
                                <p className="pg9rightTextComm pg9rightText2">Contact Details</p>
                                <p className="pg9rightTextComm pg9rightText3">niazmahmud500@gmail.com</p>
                            </div>
                            <div className="pg9RightBottom">
                                <Lottie className="page9MyImg" animationData={letteAnimPg9} loop={true} autoplay={true} speed={0.5}/>
                            </div>
                        </div>
                        <div className="pg9LeftCont">
                            <div className="pg9LeftTop">
                                    <form ref={formRef} onSubmit={sendEmail}>

                                        <div className="userNameEmail">
                                            <div className="pg9_input_data">
                                                <input type="text" value={formName}  onChange={handleChangeName} name="userName" required />
                                                <div className="pg9_underline"></div>
                                                <label htmlFor="">Your Name</label>
                                            </div>
                                            <div className="pg9_input_data">
                                                <input type="text"  value={formEmail} onChange={handleChangeEmail} name="userEmail" required />
                                                <div className="pg9_underline"></div>
                                                <label htmlFor="">Email Address</label>
                                            </div>
                                        </div>
                                        <div className="userText">
                                            <div className="pg9_input_data pg9_textarea">
                                                <textarea rows="8" cols="80" value={formMessage} onChange={handleChangeMessage} name="userMessage" required></textarea>
                                                <div className="pg9_underline"></div>
                                                <label htmlFor="">Write your message</label>
                                            </div>

                                            <div className="pg9_input_btn">
                                                <input type="submit" value="Submit" />
                                            </div>
                                        </div>
                                    </form>
                            </div>
                            <div className="pg9LeftBottom"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    )
}
